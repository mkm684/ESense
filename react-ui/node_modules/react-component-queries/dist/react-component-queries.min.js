"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types")),invariant=_interopDefault(require("invariant")),sizeMe=_interopDefault(require("react-sizeme")),mergeWith=function(e,t,r){var o=Object.assign({},e);return Object.keys(t).forEach(function(n){e[n]&&t[n]?o[n]=r(e[n],t[n],n):o[n]=t[n]}),o};function getDisplayName(e){return e.displayName||e.name||"Component"}function shallowEqual(e,t){if(e===t)return!0;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var n=Object.prototype.hasOwnProperty,i=0;i<r.length;i+=1)if(!n.call(t,r[i])||e[r[i]]!==t[r[i]])return!1;return!0}var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},objectWithoutProperties=function(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},defaultConfig={monitorHeight:!1,monitorWidth:!0,refreshRate:16,pure:!0,noPlaceholder:!1},defaultConflictResolver=function(e,t){return t},defaultSizeMeConfig=function(){return{monitorWidth:defaultConfig.monitorWidth,monitorHeight:defaultConfig.monitorHeight,refreshRate:defaultConfig.refreshRate}};function componentQueries(){for(var e=void 0,t=void 0,r=void 0,o=void 0,n=arguments.length,i=Array(n),u=0;u<n;u++)i[u]=arguments[u];if(1===i.length&&i[0].queries){if(e=i[0].queries||[],i[0].sizeMeConfig)t=i[0].sizeMeConfig||defaultSizeMeConfig(),r=defaultConfig.pure;else if(i[0].config){r=i[0].config.pure;var a=i[0].config,l=a.monitorHeight,s=a.monitorWidth,f=a.refreshRate,c=a.refreshMode,p=a.noPlaceholder;t={monitorHeight:null!=l?l:defaultConfig.monitorHeight,monitorWidth:null!=s?s:defaultConfig.monitorWidth,refreshRate:null!=f?f:defaultConfig.refreshRate,refreshMode:null!=c?c:defaultConfig.refreshMode,noPlaceholder:null!=p?p:defaultConfig.noPlaceholder}}o=o||i[0].conflictResolver||defaultConflictResolver,invariant("function"==typeof o,"The conflict resolver you provide to ComponentQueries should be a function."),invariant(Array.isArray(e),'"queries" must be provided as an array when using the complex configuration.')}else e=i;invariant(e.length>0,"You must provide at least one query to ComponentQueries."),invariant(0===e.filter(function(e){return"function"!=typeof e}).length,"All provided queries for ComponentQueries should be functions."),t=t||defaultSizeMeConfig(),o=o||defaultConflictResolver,r=null!=r?r:defaultConfig.pure;var h=function(e,t,r){if(void 0!==e)return o(e,t,r)};return function(o){var n=function(n){function i(){var e,t,r;classCallCheck(this,i);for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];return t=r=possibleConstructorReturn(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n))),r.state={queryResult:{}},possibleConstructorReturn(r,t)}return inherits(i,n),createClass(i,[{key:"componentWillMount",value:function(){var e=this.props,t=e.size,r=objectWithoutProperties(e,["size"]);this.runQueries(t,r)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.size,r=e.size,o=objectWithoutProperties(e,["size"]);shallowEqual(t,r)||this.runQueries(r,o)}},{key:"shouldComponentUpdate",value:function(e,t){var o=this.props,n=(o.size,objectWithoutProperties(o,["size"])),i=(e.size,objectWithoutProperties(e,["size"]));return!r||!shallowEqual(n,i)||!shallowEqual(this.state.queryResult,t.queryResult)}},{key:"runQueries",value:function(r,o){var n=r.width,i=r.height,u=e.reduce(function(e,r){return mergeWith(e,r({width:t.monitorWidth?n:null,height:t.monitorHeight?i:null},o),h)},{});this.setState({queryResult:u})}},{key:"render",value:function(){var e=this.props,t=(e.size,objectWithoutProperties(e,["size"])),r=mergeWith(this.state.queryResult,t,h);return React__default.createElement(o,r)}}]),i}(React.Component);return n.displayName="ComponentQueries("+getDisplayName(o)+")",n.propTypes={size:PropTypes.shape({width:PropTypes.number,height:PropTypes.number}).isRequired},n.WrappedComponent=o,sizeMe(t)(n)}}module.exports=componentQueries;
//# sourceMappingURL=react-component-queries.min.js.map
