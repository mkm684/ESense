{"ast":null,"code":"/* global window: false */\n'use strict';\n\nvar defaults = require('./core.defaults');\n\nvar Element = require('./core.element');\n\nvar helpers = require('../helpers/index');\n\ndefaults._set('global', {\n  animation: {\n    duration: 1000,\n    easing: 'easeOutQuart',\n    onProgress: helpers.noop,\n    onComplete: helpers.noop\n  }\n});\n\nmodule.exports = function (Chart) {\n  Chart.Animation = Element.extend({\n    chart: null,\n    // the animation associated chart instance\n    currentStep: 0,\n    // the current animation step\n    numSteps: 60,\n    // default number of steps\n    easing: '',\n    // the easing to use for this animation\n    render: null,\n    // render function used by the animation service\n    onAnimationProgress: null,\n    // user specified callback to fire on each step of the animation\n    onAnimationComplete: null // user specified callback to fire when the animation finishes\n\n  });\n  Chart.animationService = {\n    frameDuration: 17,\n    animations: [],\n    dropFrames: 0,\n    request: null,\n\n    /**\n     * @param {Chart} chart - The chart to animate.\n     * @param {Chart.Animation} animation - The animation that we will animate.\n     * @param {Number} duration - The animation duration in ms.\n     * @param {Boolean} lazy - if true, the chart is not marked as animating to enable more responsive interactions\n     */\n    addAnimation: function addAnimation(chart, animation, duration, lazy) {\n      var animations = this.animations;\n      var i, ilen;\n      animation.chart = chart;\n\n      if (!lazy) {\n        chart.animating = true;\n      }\n\n      for (i = 0, ilen = animations.length; i < ilen; ++i) {\n        if (animations[i].chart === chart) {\n          animations[i] = animation;\n          return;\n        }\n      }\n\n      animations.push(animation); // If there are no animations queued, manually kickstart a digest, for lack of a better word\n\n      if (animations.length === 1) {\n        this.requestAnimationFrame();\n      }\n    },\n    cancelAnimation: function cancelAnimation(chart) {\n      var index = helpers.findIndex(this.animations, function (animation) {\n        return animation.chart === chart;\n      });\n\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n        chart.animating = false;\n      }\n    },\n    requestAnimationFrame: function requestAnimationFrame() {\n      var me = this;\n\n      if (me.request === null) {\n        // Skip animation frame requests until the active one is executed.\n        // This can happen when processing mouse events, e.g. 'mousemove'\n        // and 'mouseout' events will trigger multiple renders.\n        me.request = helpers.requestAnimFrame.call(window, function () {\n          me.request = null;\n          me.startDigest();\n        });\n      }\n    },\n\n    /**\n     * @private\n     */\n    startDigest: function startDigest() {\n      var me = this;\n      var startTime = Date.now();\n      var framesToDrop = 0;\n\n      if (me.dropFrames > 1) {\n        framesToDrop = Math.floor(me.dropFrames);\n        me.dropFrames = me.dropFrames % 1;\n      }\n\n      me.advance(1 + framesToDrop);\n      var endTime = Date.now();\n      me.dropFrames += (endTime - startTime) / me.frameDuration; // Do we have more stuff to animate?\n\n      if (me.animations.length > 0) {\n        me.requestAnimationFrame();\n      }\n    },\n\n    /**\n     * @private\n     */\n    advance: function advance(count) {\n      var animations = this.animations;\n      var animation, chart;\n      var i = 0;\n\n      while (i < animations.length) {\n        animation = animations[i];\n        chart = animation.chart;\n        animation.currentStep = (animation.currentStep || 0) + count;\n        animation.currentStep = Math.min(animation.currentStep, animation.numSteps);\n        helpers.callback(animation.render, [chart, animation], chart);\n        helpers.callback(animation.onAnimationProgress, [animation], chart);\n\n        if (animation.currentStep >= animation.numSteps) {\n          helpers.callback(animation.onAnimationComplete, [animation], chart);\n          chart.animating = false;\n          animations.splice(i, 1);\n        } else {\n          ++i;\n        }\n      }\n    }\n  };\n  /**\n   * Provided for backward compatibility, use Chart.Animation instead\n   * @prop Chart.Animation#animationObject\n   * @deprecated since version 2.6.0\n   * @todo remove at version 3\n   */\n\n  Object.defineProperty(Chart.Animation.prototype, 'animationObject', {\n    get: function get() {\n      return this;\n    }\n  });\n  /**\n   * Provided for backward compatibility, use Chart.Animation#chart instead\n   * @prop Chart.Animation#chartInstance\n   * @deprecated since version 2.6.0\n   * @todo remove at version 3\n   */\n\n  Object.defineProperty(Chart.Animation.prototype, 'chartInstance', {\n    get: function get() {\n      return this.chart;\n    },\n    set: function set(value) {\n      this.chart = value;\n    }\n  });\n};","map":{"version":3,"sources":["/home/mohamed/projects/ESense/react-ui/node_modules/chart.js/src/core/core.animation.js"],"names":["defaults","require","Element","helpers","_set","animation","duration","easing","onProgress","noop","onComplete","module","exports","Chart","Animation","extend","chart","currentStep","numSteps","render","onAnimationProgress","onAnimationComplete","animationService","frameDuration","animations","dropFrames","request","addAnimation","lazy","i","ilen","animating","length","push","requestAnimationFrame","cancelAnimation","index","findIndex","splice","me","requestAnimFrame","call","window","startDigest","startTime","Date","now","framesToDrop","Math","floor","advance","endTime","count","min","callback","Object","defineProperty","prototype","get","set","value"],"mappings":"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","sourcesContent":["/* global window: false */\n'use strict';\n\nvar defaults = require('./core.defaults');\nvar Element = require('./core.element');\nvar helpers = require('../helpers/index');\n\ndefaults._set('global', {\n\tanimation: {\n\t\tduration: 1000,\n\t\teasing: 'easeOutQuart',\n\t\tonProgress: helpers.noop,\n\t\tonComplete: helpers.noop\n\t}\n});\n\nmodule.exports = function(Chart) {\n\n\tChart.Animation = Element.extend({\n\t\tchart: null, // the animation associated chart instance\n\t\tcurrentStep: 0, // the current animation step\n\t\tnumSteps: 60, // default number of steps\n\t\teasing: '', // the easing to use for this animation\n\t\trender: null, // render function used by the animation service\n\n\t\tonAnimationProgress: null, // user specified callback to fire on each step of the animation\n\t\tonAnimationComplete: null, // user specified callback to fire when the animation finishes\n\t});\n\n\tChart.animationService = {\n\t\tframeDuration: 17,\n\t\tanimations: [],\n\t\tdropFrames: 0,\n\t\trequest: null,\n\n\t\t/**\n\t\t * @param {Chart} chart - The chart to animate.\n\t\t * @param {Chart.Animation} animation - The animation that we will animate.\n\t\t * @param {Number} duration - The animation duration in ms.\n\t\t * @param {Boolean} lazy - if true, the chart is not marked as animating to enable more responsive interactions\n\t\t */\n\t\taddAnimation: function(chart, animation, duration, lazy) {\n\t\t\tvar animations = this.animations;\n\t\t\tvar i, ilen;\n\n\t\t\tanimation.chart = chart;\n\n\t\t\tif (!lazy) {\n\t\t\t\tchart.animating = true;\n\t\t\t}\n\n\t\t\tfor (i = 0, ilen = animations.length; i < ilen; ++i) {\n\t\t\t\tif (animations[i].chart === chart) {\n\t\t\t\t\tanimations[i] = animation;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tanimations.push(animation);\n\n\t\t\t// If there are no animations queued, manually kickstart a digest, for lack of a better word\n\t\t\tif (animations.length === 1) {\n\t\t\t\tthis.requestAnimationFrame();\n\t\t\t}\n\t\t},\n\n\t\tcancelAnimation: function(chart) {\n\t\t\tvar index = helpers.findIndex(this.animations, function(animation) {\n\t\t\t\treturn animation.chart === chart;\n\t\t\t});\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.animations.splice(index, 1);\n\t\t\t\tchart.animating = false;\n\t\t\t}\n\t\t},\n\n\t\trequestAnimationFrame: function() {\n\t\t\tvar me = this;\n\t\t\tif (me.request === null) {\n\t\t\t\t// Skip animation frame requests until the active one is executed.\n\t\t\t\t// This can happen when processing mouse events, e.g. 'mousemove'\n\t\t\t\t// and 'mouseout' events will trigger multiple renders.\n\t\t\t\tme.request = helpers.requestAnimFrame.call(window, function() {\n\t\t\t\t\tme.request = null;\n\t\t\t\t\tme.startDigest();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tstartDigest: function() {\n\t\t\tvar me = this;\n\t\t\tvar startTime = Date.now();\n\t\t\tvar framesToDrop = 0;\n\n\t\t\tif (me.dropFrames > 1) {\n\t\t\t\tframesToDrop = Math.floor(me.dropFrames);\n\t\t\t\tme.dropFrames = me.dropFrames % 1;\n\t\t\t}\n\n\t\t\tme.advance(1 + framesToDrop);\n\n\t\t\tvar endTime = Date.now();\n\n\t\t\tme.dropFrames += (endTime - startTime) / me.frameDuration;\n\n\t\t\t// Do we have more stuff to animate?\n\t\t\tif (me.animations.length > 0) {\n\t\t\t\tme.requestAnimationFrame();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tadvance: function(count) {\n\t\t\tvar animations = this.animations;\n\t\t\tvar animation, chart;\n\t\t\tvar i = 0;\n\n\t\t\twhile (i < animations.length) {\n\t\t\t\tanimation = animations[i];\n\t\t\t\tchart = animation.chart;\n\n\t\t\t\tanimation.currentStep = (animation.currentStep || 0) + count;\n\t\t\t\tanimation.currentStep = Math.min(animation.currentStep, animation.numSteps);\n\n\t\t\t\thelpers.callback(animation.render, [chart, animation], chart);\n\t\t\t\thelpers.callback(animation.onAnimationProgress, [animation], chart);\n\n\t\t\t\tif (animation.currentStep >= animation.numSteps) {\n\t\t\t\t\thelpers.callback(animation.onAnimationComplete, [animation], chart);\n\t\t\t\t\tchart.animating = false;\n\t\t\t\t\tanimations.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Provided for backward compatibility, use Chart.Animation instead\n\t * @prop Chart.Animation#animationObject\n\t * @deprecated since version 2.6.0\n\t * @todo remove at version 3\n\t */\n\tObject.defineProperty(Chart.Animation.prototype, 'animationObject', {\n\t\tget: function() {\n\t\t\treturn this;\n\t\t}\n\t});\n\n\t/**\n\t * Provided for backward compatibility, use Chart.Animation#chart instead\n\t * @prop Chart.Animation#chartInstance\n\t * @deprecated since version 2.6.0\n\t * @todo remove at version 3\n\t */\n\tObject.defineProperty(Chart.Animation.prototype, 'chartInstance', {\n\t\tget: function() {\n\t\t\treturn this.chart;\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis.chart = value;\n\t\t}\n\t});\n\n};\n"]},"metadata":{},"sourceType":"script"}