{"ast":null,"code":"/* global window: false */\n\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\n\nvar defaults = require('./core.defaults');\n\nvar helpers = require('../helpers/index');\n\nmodule.exports = function (Chart) {\n  // -- Basic js utility methods\n  helpers.configMerge = function ()\n  /* objects ... */\n  {\n    return helpers.merge(helpers.clone(arguments[0]), [].slice.call(arguments, 1), {\n      merger: function merger(key, target, source, options) {\n        var tval = target[key] || {};\n        var sval = source[key];\n\n        if (key === 'scales') {\n          // scale config merging is complex. Add our own function here for that\n          target[key] = helpers.scaleMerge(tval, sval);\n        } else if (key === 'scale') {\n          // used in polar area & radar charts since there is only one scale\n          target[key] = helpers.merge(tval, [Chart.scaleService.getScaleDefaults(sval.type), sval]);\n        } else {\n          helpers._merger(key, target, source, options);\n        }\n      }\n    });\n  };\n\n  helpers.scaleMerge = function ()\n  /* objects ... */\n  {\n    return helpers.merge(helpers.clone(arguments[0]), [].slice.call(arguments, 1), {\n      merger: function merger(key, target, source, options) {\n        if (key === 'xAxes' || key === 'yAxes') {\n          var slen = source[key].length;\n          var i, type, scale;\n\n          if (!target[key]) {\n            target[key] = [];\n          }\n\n          for (i = 0; i < slen; ++i) {\n            scale = source[key][i];\n            type = helpers.valueOrDefault(scale.type, key === 'xAxes' ? 'category' : 'linear');\n\n            if (i >= target[key].length) {\n              target[key].push({});\n            }\n\n            if (!target[key][i].type || scale.type && scale.type !== target[key][i].type) {\n              // new/untyped scale or type changed: let's apply the new defaults\n              // then merge source scale to correctly overwrite the defaults.\n              helpers.merge(target[key][i], [Chart.scaleService.getScaleDefaults(type), scale]);\n            } else {\n              // scales type are the same\n              helpers.merge(target[key][i], scale);\n            }\n          }\n        } else {\n          helpers._merger(key, target, source, options);\n        }\n      }\n    });\n  };\n\n  helpers.where = function (collection, filterCallback) {\n    if (helpers.isArray(collection) && Array.prototype.filter) {\n      return collection.filter(filterCallback);\n    }\n\n    var filtered = [];\n    helpers.each(collection, function (item) {\n      if (filterCallback(item)) {\n        filtered.push(item);\n      }\n    });\n    return filtered;\n  };\n\n  helpers.findIndex = Array.prototype.findIndex ? function (array, callback, scope) {\n    return array.findIndex(callback, scope);\n  } : function (array, callback, scope) {\n    scope = scope === undefined ? array : scope;\n\n    for (var i = 0, ilen = array.length; i < ilen; ++i) {\n      if (callback.call(scope, array[i], i, array)) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  helpers.findNextWhere = function (arrayToSearch, filterCallback, startIndex) {\n    // Default to start of the array\n    if (helpers.isNullOrUndef(startIndex)) {\n      startIndex = -1;\n    }\n\n    for (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n      var currentItem = arrayToSearch[i];\n\n      if (filterCallback(currentItem)) {\n        return currentItem;\n      }\n    }\n  };\n\n  helpers.findPreviousWhere = function (arrayToSearch, filterCallback, startIndex) {\n    // Default to end of the array\n    if (helpers.isNullOrUndef(startIndex)) {\n      startIndex = arrayToSearch.length;\n    }\n\n    for (var i = startIndex - 1; i >= 0; i--) {\n      var currentItem = arrayToSearch[i];\n\n      if (filterCallback(currentItem)) {\n        return currentItem;\n      }\n    }\n  }; // -- Math methods\n\n\n  helpers.isNumber = function (n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  };\n\n  helpers.almostEquals = function (x, y, epsilon) {\n    return Math.abs(x - y) < epsilon;\n  };\n\n  helpers.almostWhole = function (x, epsilon) {\n    var rounded = Math.round(x);\n    return rounded - epsilon < x && rounded + epsilon > x;\n  };\n\n  helpers.max = function (array) {\n    return array.reduce(function (max, value) {\n      if (!isNaN(value)) {\n        return Math.max(max, value);\n      }\n\n      return max;\n    }, Number.NEGATIVE_INFINITY);\n  };\n\n  helpers.min = function (array) {\n    return array.reduce(function (min, value) {\n      if (!isNaN(value)) {\n        return Math.min(min, value);\n      }\n\n      return min;\n    }, Number.POSITIVE_INFINITY);\n  };\n\n  helpers.sign = Math.sign ? function (x) {\n    return Math.sign(x);\n  } : function (x) {\n    x = +x; // convert to a number\n\n    if (x === 0 || isNaN(x)) {\n      return x;\n    }\n\n    return x > 0 ? 1 : -1;\n  };\n  helpers.log10 = Math.log10 ? function (x) {\n    return Math.log10(x);\n  } : function (x) {\n    var exponent = Math.log(x) * Math.LOG10E; // Math.LOG10E = 1 / Math.LN10.\n    // Check for whole powers of 10,\n    // which due to floating point rounding error should be corrected.\n\n    var powerOf10 = Math.round(exponent);\n    var isPowerOf10 = x === Math.pow(10, powerOf10);\n    return isPowerOf10 ? powerOf10 : exponent;\n  };\n\n  helpers.toRadians = function (degrees) {\n    return degrees * (Math.PI / 180);\n  };\n\n  helpers.toDegrees = function (radians) {\n    return radians * (180 / Math.PI);\n  }; // Gets the angle from vertical upright to the point about a centre.\n\n\n  helpers.getAngleFromPoint = function (centrePoint, anglePoint) {\n    var distanceFromXCenter = anglePoint.x - centrePoint.x;\n    var distanceFromYCenter = anglePoint.y - centrePoint.y;\n    var radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n    var angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n    if (angle < -0.5 * Math.PI) {\n      angle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n    }\n\n    return {\n      angle: angle,\n      distance: radialDistanceFromCenter\n    };\n  };\n\n  helpers.distanceBetweenPoints = function (pt1, pt2) {\n    return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n  };\n\n  helpers.aliasPixel = function (pixelWidth) {\n    return pixelWidth % 2 === 0 ? 0 : 0.5;\n  };\n\n  helpers.splineCurve = function (firstPoint, middlePoint, afterPoint, t) {\n    // Props to Rob Spencer at scaled innovation for his post on splining between points\n    // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    // This function must also respect \"skipped\" points\n    var previous = firstPoint.skip ? middlePoint : firstPoint;\n    var current = middlePoint;\n    var next = afterPoint.skip ? middlePoint : afterPoint;\n    var d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n    var d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n    var s01 = d01 / (d01 + d12);\n    var s12 = d12 / (d01 + d12); // If all points are the same, s01 & s02 will be inf\n\n    s01 = isNaN(s01) ? 0 : s01;\n    s12 = isNaN(s12) ? 0 : s12;\n    var fa = t * s01; // scaling factor for triangle Ta\n\n    var fb = t * s12;\n    return {\n      previous: {\n        x: current.x - fa * (next.x - previous.x),\n        y: current.y - fa * (next.y - previous.y)\n      },\n      next: {\n        x: current.x + fb * (next.x - previous.x),\n        y: current.y + fb * (next.y - previous.y)\n      }\n    };\n  };\n\n  helpers.EPSILON = Number.EPSILON || 1e-14;\n\n  helpers.splineCurveMonotone = function (points) {\n    // This function calculates BÃ©zier control points in a similar way than |splineCurve|,\n    // but preserves monotonicity of the provided data and ensures no local extremums are added\n    // between the dataset discrete points due to the interpolation.\n    // See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n    var pointsWithTangents = (points || []).map(function (point) {\n      return {\n        model: point._model,\n        deltaK: 0,\n        mK: 0\n      };\n    }); // Calculate slopes (deltaK) and initialize tangents (mK)\n\n    var pointsLen = pointsWithTangents.length;\n    var i, pointBefore, pointCurrent, pointAfter;\n\n    for (i = 0; i < pointsLen; ++i) {\n      pointCurrent = pointsWithTangents[i];\n\n      if (pointCurrent.model.skip) {\n        continue;\n      }\n\n      pointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n      pointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\n      if (pointAfter && !pointAfter.model.skip) {\n        var slopeDeltaX = pointAfter.model.x - pointCurrent.model.x; // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n\n        pointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\n      }\n\n      if (!pointBefore || pointBefore.model.skip) {\n        pointCurrent.mK = pointCurrent.deltaK;\n      } else if (!pointAfter || pointAfter.model.skip) {\n        pointCurrent.mK = pointBefore.deltaK;\n      } else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n        pointCurrent.mK = 0;\n      } else {\n        pointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n      }\n    } // Adjust tangents to ensure monotonic properties\n\n\n    var alphaK, betaK, tauK, squaredMagnitude;\n\n    for (i = 0; i < pointsLen - 1; ++i) {\n      pointCurrent = pointsWithTangents[i];\n      pointAfter = pointsWithTangents[i + 1];\n\n      if (pointCurrent.model.skip || pointAfter.model.skip) {\n        continue;\n      }\n\n      if (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n        pointCurrent.mK = pointAfter.mK = 0;\n        continue;\n      }\n\n      alphaK = pointCurrent.mK / pointCurrent.deltaK;\n      betaK = pointAfter.mK / pointCurrent.deltaK;\n      squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\n      if (squaredMagnitude <= 9) {\n        continue;\n      }\n\n      tauK = 3 / Math.sqrt(squaredMagnitude);\n      pointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n      pointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n    } // Compute control points\n\n\n    var deltaX;\n\n    for (i = 0; i < pointsLen; ++i) {\n      pointCurrent = pointsWithTangents[i];\n\n      if (pointCurrent.model.skip) {\n        continue;\n      }\n\n      pointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n      pointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\n      if (pointBefore && !pointBefore.model.skip) {\n        deltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n        pointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n        pointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n      }\n\n      if (pointAfter && !pointAfter.model.skip) {\n        deltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n        pointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n        pointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n      }\n    }\n  };\n\n  helpers.nextItem = function (collection, index, loop) {\n    if (loop) {\n      return index >= collection.length - 1 ? collection[0] : collection[index + 1];\n    }\n\n    return index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n  };\n\n  helpers.previousItem = function (collection, index, loop) {\n    if (loop) {\n      return index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n    }\n\n    return index <= 0 ? collection[0] : collection[index - 1];\n  }; // Implementation of the nice number algorithm used in determining where axis labels will go\n\n\n  helpers.niceNum = function (range, round) {\n    var exponent = Math.floor(helpers.log10(range));\n    var fraction = range / Math.pow(10, exponent);\n    var niceFraction;\n\n    if (round) {\n      if (fraction < 1.5) {\n        niceFraction = 1;\n      } else if (fraction < 3) {\n        niceFraction = 2;\n      } else if (fraction < 7) {\n        niceFraction = 5;\n      } else {\n        niceFraction = 10;\n      }\n    } else if (fraction <= 1.0) {\n      niceFraction = 1;\n    } else if (fraction <= 2) {\n      niceFraction = 2;\n    } else if (fraction <= 5) {\n      niceFraction = 5;\n    } else {\n      niceFraction = 10;\n    }\n\n    return niceFraction * Math.pow(10, exponent);\n  }; // Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\n\n  helpers.requestAnimFrame = function () {\n    if (typeof window === 'undefined') {\n      return function (callback) {\n        callback();\n      };\n    }\n\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n      return window.setTimeout(callback, 1000 / 60);\n    };\n  }(); // -- DOM methods\n\n\n  helpers.getRelativePosition = function (evt, chart) {\n    var mouseX, mouseY;\n    var e = evt.originalEvent || evt;\n    var canvas = evt.currentTarget || evt.srcElement;\n    var boundingRect = canvas.getBoundingClientRect();\n    var touches = e.touches;\n\n    if (touches && touches.length > 0) {\n      mouseX = touches[0].clientX;\n      mouseY = touches[0].clientY;\n    } else {\n      mouseX = e.clientX;\n      mouseY = e.clientY;\n    } // Scale mouse coordinates into canvas coordinates\n    // by following the pattern laid out by 'jerryj' in the comments of\n    // http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\n\n    var paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n    var paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n    var paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n    var paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n    var width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n    var height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom; // We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n    // the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\n    mouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / width * canvas.width / chart.currentDevicePixelRatio);\n    mouseY = Math.round((mouseY - boundingRect.top - paddingTop) / height * canvas.height / chart.currentDevicePixelRatio);\n    return {\n      x: mouseX,\n      y: mouseY\n    };\n  }; // Private helper function to convert max-width/max-height values that may be percentages into a number\n\n\n  function parseMaxStyle(styleValue, node, parentProperty) {\n    var valueInPixels;\n\n    if (typeof styleValue === 'string') {\n      valueInPixels = parseInt(styleValue, 10);\n\n      if (styleValue.indexOf('%') !== -1) {\n        // percentage * size in dimension\n        valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n      }\n    } else {\n      valueInPixels = styleValue;\n    }\n\n    return valueInPixels;\n  }\n  /**\n   * Returns if the given value contains an effective constraint.\n   * @private\n   */\n\n\n  function isConstrainedValue(value) {\n    return value !== undefined && value !== null && value !== 'none';\n  } // Private helper to get a constraint dimension\n  // @param domNode : the node to check the constraint on\n  // @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n  // @param percentageProperty : property of parent to use when calculating width as a percentage\n  // @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\n\n  function getConstraintDimension(domNode, maxStyle, percentageProperty) {\n    var view = document.defaultView;\n    var parentNode = domNode.parentNode;\n    var constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n    var constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n    var hasCNode = isConstrainedValue(constrainedNode);\n    var hasCContainer = isConstrainedValue(constrainedContainer);\n    var infinity = Number.POSITIVE_INFINITY;\n\n    if (hasCNode || hasCContainer) {\n      return Math.min(hasCNode ? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity, hasCContainer ? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n    }\n\n    return 'none';\n  } // returns Number or undefined if no constraint\n\n\n  helpers.getConstraintWidth = function (domNode) {\n    return getConstraintDimension(domNode, 'max-width', 'clientWidth');\n  }; // returns Number or undefined if no constraint\n\n\n  helpers.getConstraintHeight = function (domNode) {\n    return getConstraintDimension(domNode, 'max-height', 'clientHeight');\n  };\n\n  helpers.getMaximumWidth = function (domNode) {\n    var container = domNode.parentNode;\n\n    if (!container) {\n      return domNode.clientWidth;\n    }\n\n    var paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n    var paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n    var w = container.clientWidth - paddingLeft - paddingRight;\n    var cw = helpers.getConstraintWidth(domNode);\n    return isNaN(cw) ? w : Math.min(w, cw);\n  };\n\n  helpers.getMaximumHeight = function (domNode) {\n    var container = domNode.parentNode;\n\n    if (!container) {\n      return domNode.clientHeight;\n    }\n\n    var paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n    var paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n    var h = container.clientHeight - paddingTop - paddingBottom;\n    var ch = helpers.getConstraintHeight(domNode);\n    return isNaN(ch) ? h : Math.min(h, ch);\n  };\n\n  helpers.getStyle = function (el, property) {\n    return el.currentStyle ? el.currentStyle[property] : document.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n  };\n\n  helpers.retinaScale = function (chart, forceRatio) {\n    var pixelRatio = chart.currentDevicePixelRatio = forceRatio || window.devicePixelRatio || 1;\n\n    if (pixelRatio === 1) {\n      return;\n    }\n\n    var canvas = chart.canvas;\n    var height = chart.height;\n    var width = chart.width;\n    canvas.height = height * pixelRatio;\n    canvas.width = width * pixelRatio;\n    chart.ctx.scale(pixelRatio, pixelRatio); // If no style has been set on the canvas, the render size is used as display size,\n    // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n    // See https://github.com/chartjs/Chart.js/issues/3575\n\n    if (!canvas.style.height && !canvas.style.width) {\n      canvas.style.height = height + 'px';\n      canvas.style.width = width + 'px';\n    }\n  }; // -- Canvas methods\n\n\n  helpers.fontString = function (pixelSize, fontStyle, fontFamily) {\n    return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n  };\n\n  helpers.longestText = function (ctx, font, arrayOfThings, cache) {\n    cache = cache || {};\n    var data = cache.data = cache.data || {};\n    var gc = cache.garbageCollect = cache.garbageCollect || [];\n\n    if (cache.font !== font) {\n      data = cache.data = {};\n      gc = cache.garbageCollect = [];\n      cache.font = font;\n    }\n\n    ctx.font = font;\n    var longest = 0;\n    helpers.each(arrayOfThings, function (thing) {\n      // Undefined strings and arrays should not be measured\n      if (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n        longest = helpers.measureText(ctx, data, gc, longest, thing);\n      } else if (helpers.isArray(thing)) {\n        // if it is an array lets measure each element\n        // to do maybe simplify this function a bit so we can do this more recursively?\n        helpers.each(thing, function (nestedThing) {\n          // Undefined strings and arrays should not be measured\n          if (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n            longest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n          }\n        });\n      }\n    });\n    var gcLen = gc.length / 2;\n\n    if (gcLen > arrayOfThings.length) {\n      for (var i = 0; i < gcLen; i++) {\n        delete data[gc[i]];\n      }\n\n      gc.splice(0, gcLen);\n    }\n\n    return longest;\n  };\n\n  helpers.measureText = function (ctx, data, gc, longest, string) {\n    var textWidth = data[string];\n\n    if (!textWidth) {\n      textWidth = data[string] = ctx.measureText(string).width;\n      gc.push(string);\n    }\n\n    if (textWidth > longest) {\n      longest = textWidth;\n    }\n\n    return longest;\n  };\n\n  helpers.numberOfLabelLines = function (arrayOfThings) {\n    var numberOfLines = 1;\n    helpers.each(arrayOfThings, function (thing) {\n      if (helpers.isArray(thing)) {\n        if (thing.length > numberOfLines) {\n          numberOfLines = thing.length;\n        }\n      }\n    });\n    return numberOfLines;\n  };\n\n  helpers.color = !color ? function (value) {\n    console.error('Color.js not found!');\n    return value;\n  } : function (value) {\n    /* global CanvasGradient */\n    if (value instanceof CanvasGradient) {\n      value = defaults.global.defaultColor;\n    }\n\n    return color(value);\n  };\n\n  helpers.getHoverColor = function (colorValue) {\n    /* global CanvasPattern */\n    return colorValue instanceof CanvasPattern ? colorValue : helpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n  };\n};","map":{"version":3,"sources":["/home/mohamed/projects/ESense/react-ui/node_modules/chart.js/src/core/core.helpers.js"],"names":["color","require","defaults","helpers","module","exports","Chart","configMerge","merge","clone","arguments","slice","call","merger","key","target","source","options","tval","sval","scaleMerge","scaleService","getScaleDefaults","type","_merger","slen","length","i","scale","valueOrDefault","push","where","collection","filterCallback","isArray","Array","prototype","filter","filtered","each","item","findIndex","array","callback","scope","undefined","ilen","findNextWhere","arrayToSearch","startIndex","isNullOrUndef","currentItem","findPreviousWhere","isNumber","n","isNaN","parseFloat","isFinite","almostEquals","x","y","epsilon","Math","abs","almostWhole","rounded","round","max","reduce","value","Number","NEGATIVE_INFINITY","min","POSITIVE_INFINITY","sign","log10","exponent","log","LOG10E","powerOf10","isPowerOf10","pow","toRadians","degrees","PI","toDegrees","radians","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","aliasPixel","pixelWidth","splineCurve","firstPoint","middlePoint","afterPoint","t","previous","skip","current","next","d01","d12","s01","s12","fa","fb","EPSILON","splineCurveMonotone","points","pointsWithTangents","map","point","model","_model","deltaK","mK","pointsLen","pointBefore","pointCurrent","pointAfter","slopeDeltaX","alphaK","betaK","tauK","squaredMagnitude","deltaX","controlPointPreviousX","controlPointPreviousY","controlPointNextX","controlPointNextY","nextItem","index","loop","previousItem","niceNum","range","floor","fraction","niceFraction","requestAnimFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","getRelativePosition","evt","chart","mouseX","mouseY","e","originalEvent","canvas","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","clientY","paddingLeft","getStyle","paddingTop","paddingRight","paddingBottom","width","right","left","height","bottom","top","currentDevicePixelRatio","parseMaxStyle","styleValue","node","parentProperty","valueInPixels","parseInt","indexOf","parentNode","isConstrainedValue","getConstraintDimension","domNode","maxStyle","percentageProperty","view","document","defaultView","constrainedNode","getComputedStyle","constrainedContainer","hasCNode","hasCContainer","infinity","getConstraintWidth","getConstraintHeight","getMaximumWidth","container","clientWidth","w","cw","getMaximumHeight","clientHeight","h","ch","el","property","currentStyle","getPropertyValue","retinaScale","forceRatio","pixelRatio","devicePixelRatio","ctx","style","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfThings","cache","data","gc","garbageCollect","longest","thing","measureText","nestedThing","gcLen","splice","string","textWidth","numberOfLabelLines","numberOfLines","console","error","CanvasGradient","global","defaultColor","getHoverColor","colorValue","CanvasPattern","saturate","darken","rgbString"],"mappings":"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","sourcesContent":["/* global window: false */\n/* global document: false */\n'use strict';\n\nvar color = require('chartjs-color');\nvar defaults = require('./core.defaults');\nvar helpers = require('../helpers/index');\n\nmodule.exports = function(Chart) {\n\n\t// -- Basic js utility methods\n\n\thelpers.configMerge = function(/* objects ... */) {\n\t\treturn helpers.merge(helpers.clone(arguments[0]), [].slice.call(arguments, 1), {\n\t\t\tmerger: function(key, target, source, options) {\n\t\t\t\tvar tval = target[key] || {};\n\t\t\t\tvar sval = source[key];\n\n\t\t\t\tif (key === 'scales') {\n\t\t\t\t\t// scale config merging is complex. Add our own function here for that\n\t\t\t\t\ttarget[key] = helpers.scaleMerge(tval, sval);\n\t\t\t\t} else if (key === 'scale') {\n\t\t\t\t\t// used in polar area & radar charts since there is only one scale\n\t\t\t\t\ttarget[key] = helpers.merge(tval, [Chart.scaleService.getScaleDefaults(sval.type), sval]);\n\t\t\t\t} else {\n\t\t\t\t\thelpers._merger(key, target, source, options);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\thelpers.scaleMerge = function(/* objects ... */) {\n\t\treturn helpers.merge(helpers.clone(arguments[0]), [].slice.call(arguments, 1), {\n\t\t\tmerger: function(key, target, source, options) {\n\t\t\t\tif (key === 'xAxes' || key === 'yAxes') {\n\t\t\t\t\tvar slen = source[key].length;\n\t\t\t\t\tvar i, type, scale;\n\n\t\t\t\t\tif (!target[key]) {\n\t\t\t\t\t\ttarget[key] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (i = 0; i < slen; ++i) {\n\t\t\t\t\t\tscale = source[key][i];\n\t\t\t\t\t\ttype = helpers.valueOrDefault(scale.type, key === 'xAxes' ? 'category' : 'linear');\n\n\t\t\t\t\t\tif (i >= target[key].length) {\n\t\t\t\t\t\t\ttarget[key].push({});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!target[key][i].type || (scale.type && scale.type !== target[key][i].type)) {\n\t\t\t\t\t\t\t// new/untyped scale or type changed: let's apply the new defaults\n\t\t\t\t\t\t\t// then merge source scale to correctly overwrite the defaults.\n\t\t\t\t\t\t\thelpers.merge(target[key][i], [Chart.scaleService.getScaleDefaults(type), scale]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// scales type are the same\n\t\t\t\t\t\t\thelpers.merge(target[key][i], scale);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thelpers._merger(key, target, source, options);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\thelpers.where = function(collection, filterCallback) {\n\t\tif (helpers.isArray(collection) && Array.prototype.filter) {\n\t\t\treturn collection.filter(filterCallback);\n\t\t}\n\t\tvar filtered = [];\n\n\t\thelpers.each(collection, function(item) {\n\t\t\tif (filterCallback(item)) {\n\t\t\t\tfiltered.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn filtered;\n\t};\n\thelpers.findIndex = Array.prototype.findIndex ?\n\t\tfunction(array, callback, scope) {\n\t\t\treturn array.findIndex(callback, scope);\n\t\t} :\n\t\tfunction(array, callback, scope) {\n\t\t\tscope = scope === undefined ? array : scope;\n\t\t\tfor (var i = 0, ilen = array.length; i < ilen; ++i) {\n\t\t\t\tif (callback.call(scope, array[i], i, array)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\thelpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to start of the array\n\t\tif (helpers.isNullOrUndef(startIndex)) {\n\t\t\tstartIndex = -1;\n\t\t}\n\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex) {\n\t\t// Default to end of the array\n\t\tif (helpers.isNullOrUndef(startIndex)) {\n\t\t\tstartIndex = arrayToSearch.length;\n\t\t}\n\t\tfor (var i = startIndex - 1; i >= 0; i--) {\n\t\t\tvar currentItem = arrayToSearch[i];\n\t\t\tif (filterCallback(currentItem)) {\n\t\t\t\treturn currentItem;\n\t\t\t}\n\t\t}\n\t};\n\n\t// -- Math methods\n\thelpers.isNumber = function(n) {\n\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t};\n\thelpers.almostEquals = function(x, y, epsilon) {\n\t\treturn Math.abs(x - y) < epsilon;\n\t};\n\thelpers.almostWhole = function(x, epsilon) {\n\t\tvar rounded = Math.round(x);\n\t\treturn (((rounded - epsilon) < x) && ((rounded + epsilon) > x));\n\t};\n\thelpers.max = function(array) {\n\t\treturn array.reduce(function(max, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.max(max, value);\n\t\t\t}\n\t\t\treturn max;\n\t\t}, Number.NEGATIVE_INFINITY);\n\t};\n\thelpers.min = function(array) {\n\t\treturn array.reduce(function(min, value) {\n\t\t\tif (!isNaN(value)) {\n\t\t\t\treturn Math.min(min, value);\n\t\t\t}\n\t\t\treturn min;\n\t\t}, Number.POSITIVE_INFINITY);\n\t};\n\thelpers.sign = Math.sign ?\n\t\tfunction(x) {\n\t\t\treturn Math.sign(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tx = +x; // convert to a number\n\t\t\tif (x === 0 || isNaN(x)) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x > 0 ? 1 : -1;\n\t\t};\n\thelpers.log10 = Math.log10 ?\n\t\tfunction(x) {\n\t\t\treturn Math.log10(x);\n\t\t} :\n\t\tfunction(x) {\n\t\t\tvar exponent = Math.log(x) * Math.LOG10E; // Math.LOG10E = 1 / Math.LN10.\n\t\t\t// Check for whole powers of 10,\n\t\t\t// which due to floating point rounding error should be corrected.\n\t\t\tvar powerOf10 = Math.round(exponent);\n\t\t\tvar isPowerOf10 = x === Math.pow(10, powerOf10);\n\n\t\t\treturn isPowerOf10 ? powerOf10 : exponent;\n\t\t};\n\thelpers.toRadians = function(degrees) {\n\t\treturn degrees * (Math.PI / 180);\n\t};\n\thelpers.toDegrees = function(radians) {\n\t\treturn radians * (180 / Math.PI);\n\t};\n\t// Gets the angle from vertical upright to the point about a centre.\n\thelpers.getAngleFromPoint = function(centrePoint, anglePoint) {\n\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x;\n\t\tvar distanceFromYCenter = anglePoint.y - centrePoint.y;\n\t\tvar radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n\t\tvar angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n\t\tif (angle < (-0.5 * Math.PI)) {\n\t\t\tangle += 2.0 * Math.PI; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n\t\t}\n\n\t\treturn {\n\t\t\tangle: angle,\n\t\t\tdistance: radialDistanceFromCenter\n\t\t};\n\t};\n\thelpers.distanceBetweenPoints = function(pt1, pt2) {\n\t\treturn Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n\t};\n\thelpers.aliasPixel = function(pixelWidth) {\n\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\n\t};\n\thelpers.splineCurve = function(firstPoint, middlePoint, afterPoint, t) {\n\t\t// Props to Rob Spencer at scaled innovation for his post on splining between points\n\t\t// http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n\t\t// This function must also respect \"skipped\" points\n\n\t\tvar previous = firstPoint.skip ? middlePoint : firstPoint;\n\t\tvar current = middlePoint;\n\t\tvar next = afterPoint.skip ? middlePoint : afterPoint;\n\n\t\tvar d01 = Math.sqrt(Math.pow(current.x - previous.x, 2) + Math.pow(current.y - previous.y, 2));\n\t\tvar d12 = Math.sqrt(Math.pow(next.x - current.x, 2) + Math.pow(next.y - current.y, 2));\n\n\t\tvar s01 = d01 / (d01 + d12);\n\t\tvar s12 = d12 / (d01 + d12);\n\n\t\t// If all points are the same, s01 & s02 will be inf\n\t\ts01 = isNaN(s01) ? 0 : s01;\n\t\ts12 = isNaN(s12) ? 0 : s12;\n\n\t\tvar fa = t * s01; // scaling factor for triangle Ta\n\t\tvar fb = t * s12;\n\n\t\treturn {\n\t\t\tprevious: {\n\t\t\t\tx: current.x - fa * (next.x - previous.x),\n\t\t\t\ty: current.y - fa * (next.y - previous.y)\n\t\t\t},\n\t\t\tnext: {\n\t\t\t\tx: current.x + fb * (next.x - previous.x),\n\t\t\t\ty: current.y + fb * (next.y - previous.y)\n\t\t\t}\n\t\t};\n\t};\n\thelpers.EPSILON = Number.EPSILON || 1e-14;\n\thelpers.splineCurveMonotone = function(points) {\n\t\t// This function calculates BÃ©zier control points in a similar way than |splineCurve|,\n\t\t// but preserves monotonicity of the provided data and ensures no local extremums are added\n\t\t// between the dataset discrete points due to the interpolation.\n\t\t// See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n\n\t\tvar pointsWithTangents = (points || []).map(function(point) {\n\t\t\treturn {\n\t\t\t\tmodel: point._model,\n\t\t\t\tdeltaK: 0,\n\t\t\t\tmK: 0\n\t\t\t};\n\t\t});\n\n\t\t// Calculate slopes (deltaK) and initialize tangents (mK)\n\t\tvar pointsLen = pointsWithTangents.length;\n\t\tvar i, pointBefore, pointCurrent, pointAfter;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tvar slopeDeltaX = (pointAfter.model.x - pointCurrent.model.x);\n\n\t\t\t\t// In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n\t\t\t\tpointCurrent.deltaK = slopeDeltaX !== 0 ? (pointAfter.model.y - pointCurrent.model.y) / slopeDeltaX : 0;\n\t\t\t}\n\n\t\t\tif (!pointBefore || pointBefore.model.skip) {\n\t\t\t\tpointCurrent.mK = pointCurrent.deltaK;\n\t\t\t} else if (!pointAfter || pointAfter.model.skip) {\n\t\t\t\tpointCurrent.mK = pointBefore.deltaK;\n\t\t\t} else if (this.sign(pointBefore.deltaK) !== this.sign(pointCurrent.deltaK)) {\n\t\t\t\tpointCurrent.mK = 0;\n\t\t\t} else {\n\t\t\t\tpointCurrent.mK = (pointBefore.deltaK + pointCurrent.deltaK) / 2;\n\t\t\t}\n\t\t}\n\n\t\t// Adjust tangents to ensure monotonic properties\n\t\tvar alphaK, betaK, tauK, squaredMagnitude;\n\t\tfor (i = 0; i < pointsLen - 1; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tpointAfter = pointsWithTangents[i + 1];\n\t\t\tif (pointCurrent.model.skip || pointAfter.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (helpers.almostEquals(pointCurrent.deltaK, 0, this.EPSILON)) {\n\t\t\t\tpointCurrent.mK = pointAfter.mK = 0;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\talphaK = pointCurrent.mK / pointCurrent.deltaK;\n\t\t\tbetaK = pointAfter.mK / pointCurrent.deltaK;\n\t\t\tsquaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\t\t\tif (squaredMagnitude <= 9) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttauK = 3 / Math.sqrt(squaredMagnitude);\n\t\t\tpointCurrent.mK = alphaK * tauK * pointCurrent.deltaK;\n\t\t\tpointAfter.mK = betaK * tauK * pointCurrent.deltaK;\n\t\t}\n\n\t\t// Compute control points\n\t\tvar deltaX;\n\t\tfor (i = 0; i < pointsLen; ++i) {\n\t\t\tpointCurrent = pointsWithTangents[i];\n\t\t\tif (pointCurrent.model.skip) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpointBefore = i > 0 ? pointsWithTangents[i - 1] : null;\n\t\t\tpointAfter = i < pointsLen - 1 ? pointsWithTangents[i + 1] : null;\n\t\t\tif (pointBefore && !pointBefore.model.skip) {\n\t\t\t\tdeltaX = (pointCurrent.model.x - pointBefore.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointPreviousX = pointCurrent.model.x - deltaX;\n\t\t\t\tpointCurrent.model.controlPointPreviousY = pointCurrent.model.y - deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t\tif (pointAfter && !pointAfter.model.skip) {\n\t\t\t\tdeltaX = (pointAfter.model.x - pointCurrent.model.x) / 3;\n\t\t\t\tpointCurrent.model.controlPointNextX = pointCurrent.model.x + deltaX;\n\t\t\t\tpointCurrent.model.controlPointNextY = pointCurrent.model.y + deltaX * pointCurrent.mK;\n\t\t\t}\n\t\t}\n\t};\n\thelpers.nextItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index >= collection.length - 1 ? collection[0] : collection[index + 1];\n\t\t}\n\t\treturn index >= collection.length - 1 ? collection[collection.length - 1] : collection[index + 1];\n\t};\n\thelpers.previousItem = function(collection, index, loop) {\n\t\tif (loop) {\n\t\t\treturn index <= 0 ? collection[collection.length - 1] : collection[index - 1];\n\t\t}\n\t\treturn index <= 0 ? collection[0] : collection[index - 1];\n\t};\n\t// Implementation of the nice number algorithm used in determining where axis labels will go\n\thelpers.niceNum = function(range, round) {\n\t\tvar exponent = Math.floor(helpers.log10(range));\n\t\tvar fraction = range / Math.pow(10, exponent);\n\t\tvar niceFraction;\n\n\t\tif (round) {\n\t\t\tif (fraction < 1.5) {\n\t\t\t\tniceFraction = 1;\n\t\t\t} else if (fraction < 3) {\n\t\t\t\tniceFraction = 2;\n\t\t\t} else if (fraction < 7) {\n\t\t\t\tniceFraction = 5;\n\t\t\t} else {\n\t\t\t\tniceFraction = 10;\n\t\t\t}\n\t\t} else if (fraction <= 1.0) {\n\t\t\tniceFraction = 1;\n\t\t} else if (fraction <= 2) {\n\t\t\tniceFraction = 2;\n\t\t} else if (fraction <= 5) {\n\t\t\tniceFraction = 5;\n\t\t} else {\n\t\t\tniceFraction = 10;\n\t\t}\n\n\t\treturn niceFraction * Math.pow(10, exponent);\n\t};\n\t// Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\thelpers.requestAnimFrame = (function() {\n\t\tif (typeof window === 'undefined') {\n\t\t\treturn function(callback) {\n\t\t\t\tcallback();\n\t\t\t};\n\t\t}\n\t\treturn window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(callback) {\n\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\n\t\t\t};\n\t}());\n\t// -- DOM methods\n\thelpers.getRelativePosition = function(evt, chart) {\n\t\tvar mouseX, mouseY;\n\t\tvar e = evt.originalEvent || evt;\n\t\tvar canvas = evt.currentTarget || evt.srcElement;\n\t\tvar boundingRect = canvas.getBoundingClientRect();\n\n\t\tvar touches = e.touches;\n\t\tif (touches && touches.length > 0) {\n\t\t\tmouseX = touches[0].clientX;\n\t\t\tmouseY = touches[0].clientY;\n\n\t\t} else {\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\t\t}\n\n\t\t// Scale mouse coordinates into canvas coordinates\n\t\t// by following the pattern laid out by 'jerryj' in the comments of\n\t\t// http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/\n\t\tvar paddingLeft = parseFloat(helpers.getStyle(canvas, 'padding-left'));\n\t\tvar paddingTop = parseFloat(helpers.getStyle(canvas, 'padding-top'));\n\t\tvar paddingRight = parseFloat(helpers.getStyle(canvas, 'padding-right'));\n\t\tvar paddingBottom = parseFloat(helpers.getStyle(canvas, 'padding-bottom'));\n\t\tvar width = boundingRect.right - boundingRect.left - paddingLeft - paddingRight;\n\t\tvar height = boundingRect.bottom - boundingRect.top - paddingTop - paddingBottom;\n\n\t\t// We divide by the current device pixel ratio, because the canvas is scaled up by that amount in each direction. However\n\t\t// the backend model is in unscaled coordinates. Since we are going to deal with our model coordinates, we go back here\n\t\tmouseX = Math.round((mouseX - boundingRect.left - paddingLeft) / (width) * canvas.width / chart.currentDevicePixelRatio);\n\t\tmouseY = Math.round((mouseY - boundingRect.top - paddingTop) / (height) * canvas.height / chart.currentDevicePixelRatio);\n\n\t\treturn {\n\t\t\tx: mouseX,\n\t\t\ty: mouseY\n\t\t};\n\n\t};\n\n\t// Private helper function to convert max-width/max-height values that may be percentages into a number\n\tfunction parseMaxStyle(styleValue, node, parentProperty) {\n\t\tvar valueInPixels;\n\t\tif (typeof styleValue === 'string') {\n\t\t\tvalueInPixels = parseInt(styleValue, 10);\n\n\t\t\tif (styleValue.indexOf('%') !== -1) {\n\t\t\t\t// percentage * size in dimension\n\t\t\t\tvalueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n\t\t\t}\n\t\t} else {\n\t\t\tvalueInPixels = styleValue;\n\t\t}\n\n\t\treturn valueInPixels;\n\t}\n\n\t/**\n\t * Returns if the given value contains an effective constraint.\n\t * @private\n\t */\n\tfunction isConstrainedValue(value) {\n\t\treturn value !== undefined && value !== null && value !== 'none';\n\t}\n\n\t// Private helper to get a constraint dimension\n\t// @param domNode : the node to check the constraint on\n\t// @param maxStyle : the style that defines the maximum for the direction we are using (maxWidth / maxHeight)\n\t// @param percentageProperty : property of parent to use when calculating width as a percentage\n\t// @see http://www.nathanaeljones.com/blog/2013/reading-max-width-cross-browser\n\tfunction getConstraintDimension(domNode, maxStyle, percentageProperty) {\n\t\tvar view = document.defaultView;\n\t\tvar parentNode = domNode.parentNode;\n\t\tvar constrainedNode = view.getComputedStyle(domNode)[maxStyle];\n\t\tvar constrainedContainer = view.getComputedStyle(parentNode)[maxStyle];\n\t\tvar hasCNode = isConstrainedValue(constrainedNode);\n\t\tvar hasCContainer = isConstrainedValue(constrainedContainer);\n\t\tvar infinity = Number.POSITIVE_INFINITY;\n\n\t\tif (hasCNode || hasCContainer) {\n\t\t\treturn Math.min(\n\t\t\t\thasCNode ? parseMaxStyle(constrainedNode, domNode, percentageProperty) : infinity,\n\t\t\t\thasCContainer ? parseMaxStyle(constrainedContainer, parentNode, percentageProperty) : infinity);\n\t\t}\n\n\t\treturn 'none';\n\t}\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintWidth = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-width', 'clientWidth');\n\t};\n\t// returns Number or undefined if no constraint\n\thelpers.getConstraintHeight = function(domNode) {\n\t\treturn getConstraintDimension(domNode, 'max-height', 'clientHeight');\n\t};\n\thelpers.getMaximumWidth = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tif (!container) {\n\t\t\treturn domNode.clientWidth;\n\t\t}\n\n\t\tvar paddingLeft = parseInt(helpers.getStyle(container, 'padding-left'), 10);\n\t\tvar paddingRight = parseInt(helpers.getStyle(container, 'padding-right'), 10);\n\t\tvar w = container.clientWidth - paddingLeft - paddingRight;\n\t\tvar cw = helpers.getConstraintWidth(domNode);\n\t\treturn isNaN(cw) ? w : Math.min(w, cw);\n\t};\n\thelpers.getMaximumHeight = function(domNode) {\n\t\tvar container = domNode.parentNode;\n\t\tif (!container) {\n\t\t\treturn domNode.clientHeight;\n\t\t}\n\n\t\tvar paddingTop = parseInt(helpers.getStyle(container, 'padding-top'), 10);\n\t\tvar paddingBottom = parseInt(helpers.getStyle(container, 'padding-bottom'), 10);\n\t\tvar h = container.clientHeight - paddingTop - paddingBottom;\n\t\tvar ch = helpers.getConstraintHeight(domNode);\n\t\treturn isNaN(ch) ? h : Math.min(h, ch);\n\t};\n\thelpers.getStyle = function(el, property) {\n\t\treturn el.currentStyle ?\n\t\t\tel.currentStyle[property] :\n\t\t\tdocument.defaultView.getComputedStyle(el, null).getPropertyValue(property);\n\t};\n\thelpers.retinaScale = function(chart, forceRatio) {\n\t\tvar pixelRatio = chart.currentDevicePixelRatio = forceRatio || window.devicePixelRatio || 1;\n\t\tif (pixelRatio === 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar canvas = chart.canvas;\n\t\tvar height = chart.height;\n\t\tvar width = chart.width;\n\n\t\tcanvas.height = height * pixelRatio;\n\t\tcanvas.width = width * pixelRatio;\n\t\tchart.ctx.scale(pixelRatio, pixelRatio);\n\n\t\t// If no style has been set on the canvas, the render size is used as display size,\n\t\t// making the chart visually bigger, so let's enforce it to the \"correct\" values.\n\t\t// See https://github.com/chartjs/Chart.js/issues/3575\n\t\tif (!canvas.style.height && !canvas.style.width) {\n\t\t\tcanvas.style.height = height + 'px';\n\t\t\tcanvas.style.width = width + 'px';\n\t\t}\n\t};\n\t// -- Canvas methods\n\thelpers.fontString = function(pixelSize, fontStyle, fontFamily) {\n\t\treturn fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n\t};\n\thelpers.longestText = function(ctx, font, arrayOfThings, cache) {\n\t\tcache = cache || {};\n\t\tvar data = cache.data = cache.data || {};\n\t\tvar gc = cache.garbageCollect = cache.garbageCollect || [];\n\n\t\tif (cache.font !== font) {\n\t\t\tdata = cache.data = {};\n\t\t\tgc = cache.garbageCollect = [];\n\t\t\tcache.font = font;\n\t\t}\n\n\t\tctx.font = font;\n\t\tvar longest = 0;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\t// Undefined strings and arrays should not be measured\n\t\t\tif (thing !== undefined && thing !== null && helpers.isArray(thing) !== true) {\n\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, thing);\n\t\t\t} else if (helpers.isArray(thing)) {\n\t\t\t\t// if it is an array lets measure each element\n\t\t\t\t// to do maybe simplify this function a bit so we can do this more recursively?\n\t\t\t\thelpers.each(thing, function(nestedThing) {\n\t\t\t\t\t// Undefined strings and arrays should not be measured\n\t\t\t\t\tif (nestedThing !== undefined && nestedThing !== null && !helpers.isArray(nestedThing)) {\n\t\t\t\t\t\tlongest = helpers.measureText(ctx, data, gc, longest, nestedThing);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tvar gcLen = gc.length / 2;\n\t\tif (gcLen > arrayOfThings.length) {\n\t\t\tfor (var i = 0; i < gcLen; i++) {\n\t\t\t\tdelete data[gc[i]];\n\t\t\t}\n\t\t\tgc.splice(0, gcLen);\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.measureText = function(ctx, data, gc, longest, string) {\n\t\tvar textWidth = data[string];\n\t\tif (!textWidth) {\n\t\t\ttextWidth = data[string] = ctx.measureText(string).width;\n\t\t\tgc.push(string);\n\t\t}\n\t\tif (textWidth > longest) {\n\t\t\tlongest = textWidth;\n\t\t}\n\t\treturn longest;\n\t};\n\thelpers.numberOfLabelLines = function(arrayOfThings) {\n\t\tvar numberOfLines = 1;\n\t\thelpers.each(arrayOfThings, function(thing) {\n\t\t\tif (helpers.isArray(thing)) {\n\t\t\t\tif (thing.length > numberOfLines) {\n\t\t\t\t\tnumberOfLines = thing.length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn numberOfLines;\n\t};\n\n\thelpers.color = !color ?\n\t\tfunction(value) {\n\t\t\tconsole.error('Color.js not found!');\n\t\t\treturn value;\n\t\t} :\n\t\tfunction(value) {\n\t\t\t/* global CanvasGradient */\n\t\t\tif (value instanceof CanvasGradient) {\n\t\t\t\tvalue = defaults.global.defaultColor;\n\t\t\t}\n\n\t\t\treturn color(value);\n\t\t};\n\n\thelpers.getHoverColor = function(colorValue) {\n\t\t/* global CanvasPattern */\n\t\treturn (colorValue instanceof CanvasPattern) ?\n\t\t\tcolorValue :\n\t\t\thelpers.color(colorValue).saturate(0.5).darken(0.1).rgbString();\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}