{"ast":null,"code":"'use strict';\n\nvar defaults = require('../core/core.defaults');\n\nvar elements = require('../elements/index');\n\nvar helpers = require('../helpers/index');\n\ndefaults._set('polarArea', {\n  scale: {\n    type: 'radialLinear',\n    angleLines: {\n      display: false\n    },\n    gridLines: {\n      circular: true\n    },\n    pointLabels: {\n      display: false\n    },\n    ticks: {\n      beginAtZero: true\n    }\n  },\n  // Boolean - Whether to animate the rotation of the chart\n  animation: {\n    animateRotate: true,\n    animateScale: true\n  },\n  startAngle: -0.5 * Math.PI,\n  legendCallback: function legendCallback(chart) {\n    var text = [];\n    text.push('<ul class=\"' + chart.id + '-legend\">');\n    var data = chart.data;\n    var datasets = data.datasets;\n    var labels = data.labels;\n\n    if (datasets.length) {\n      for (var i = 0; i < datasets[0].data.length; ++i) {\n        text.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\"></span>');\n\n        if (labels[i]) {\n          text.push(labels[i]);\n        }\n\n        text.push('</li>');\n      }\n    }\n\n    text.push('</ul>');\n    return text.join('');\n  },\n  legend: {\n    labels: {\n      generateLabels: function generateLabels(chart) {\n        var data = chart.data;\n\n        if (data.labels.length && data.datasets.length) {\n          return data.labels.map(function (label, i) {\n            var meta = chart.getDatasetMeta(0);\n            var ds = data.datasets[0];\n            var arc = meta.data[i];\n            var custom = arc.custom || {};\n            var valueAtIndexOrDefault = helpers.valueAtIndexOrDefault;\n            var arcOpts = chart.options.elements.arc;\n            var fill = custom.backgroundColor ? custom.backgroundColor : valueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n            var stroke = custom.borderColor ? custom.borderColor : valueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n            var bw = custom.borderWidth ? custom.borderWidth : valueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n            return {\n              text: label,\n              fillStyle: fill,\n              strokeStyle: stroke,\n              lineWidth: bw,\n              hidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n              // Extra data used for toggling the correct item\n              index: i\n            };\n          });\n        }\n\n        return [];\n      }\n    },\n    onClick: function onClick(e, legendItem) {\n      var index = legendItem.index;\n      var chart = this.chart;\n      var i, ilen, meta;\n\n      for (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n        meta = chart.getDatasetMeta(i);\n        meta.data[index].hidden = !meta.data[index].hidden;\n      }\n\n      chart.update();\n    }\n  },\n  // Need to override these to give a nice default\n  tooltips: {\n    callbacks: {\n      title: function title() {\n        return '';\n      },\n      label: function label(item, data) {\n        return data.labels[item.index] + ': ' + item.yLabel;\n      }\n    }\n  }\n});\n\nmodule.exports = function (Chart) {\n  Chart.controllers.polarArea = Chart.DatasetController.extend({\n    dataElementType: elements.Arc,\n    linkScales: helpers.noop,\n    update: function update(reset) {\n      var me = this;\n      var chart = me.chart;\n      var chartArea = chart.chartArea;\n      var meta = me.getMeta();\n      var opts = chart.options;\n      var arcOpts = opts.elements.arc;\n      var minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n      chart.outerRadius = Math.max((minSize - arcOpts.borderWidth / 2) / 2, 0);\n      chart.innerRadius = Math.max(opts.cutoutPercentage ? chart.outerRadius / 100 * opts.cutoutPercentage : 1, 0);\n      chart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n      me.outerRadius = chart.outerRadius - chart.radiusLength * me.index;\n      me.innerRadius = me.outerRadius - chart.radiusLength;\n      meta.count = me.countVisibleElements();\n      helpers.each(meta.data, function (arc, index) {\n        me.updateElement(arc, index, reset);\n      });\n    },\n    updateElement: function updateElement(arc, index, reset) {\n      var me = this;\n      var chart = me.chart;\n      var dataset = me.getDataset();\n      var opts = chart.options;\n      var animationOpts = opts.animation;\n      var scale = chart.scale;\n      var labels = chart.data.labels;\n      var circumference = me.calculateCircumference(dataset.data[index]);\n      var centerX = scale.xCenter;\n      var centerY = scale.yCenter; // If there is NaN data before us, we need to calculate the starting angle correctly.\n      // We could be way more efficient here, but its unlikely that the polar area chart will have a lot of data\n\n      var visibleCount = 0;\n      var meta = me.getMeta();\n\n      for (var i = 0; i < index; ++i) {\n        if (!isNaN(dataset.data[i]) && !meta.data[i].hidden) {\n          ++visibleCount;\n        }\n      } // var negHalfPI = -0.5 * Math.PI;\n\n\n      var datasetStartAngle = opts.startAngle;\n      var distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n      var startAngle = datasetStartAngle + circumference * visibleCount;\n      var endAngle = startAngle + (arc.hidden ? 0 : circumference);\n      var resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n      helpers.extend(arc, {\n        // Utility\n        _datasetIndex: me.index,\n        _index: index,\n        _scale: scale,\n        // Desired view properties\n        _model: {\n          x: centerX,\n          y: centerY,\n          innerRadius: 0,\n          outerRadius: reset ? resetRadius : distance,\n          startAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\n          endAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\n          label: helpers.valueAtIndexOrDefault(labels, index, labels[index])\n        }\n      }); // Apply border and fill style\n\n      me.removeHoverStyle(arc);\n      arc.pivot();\n    },\n    removeHoverStyle: function removeHoverStyle(arc) {\n      Chart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n    },\n    countVisibleElements: function countVisibleElements() {\n      var dataset = this.getDataset();\n      var meta = this.getMeta();\n      var count = 0;\n      helpers.each(meta.data, function (element, index) {\n        if (!isNaN(dataset.data[index]) && !element.hidden) {\n          count++;\n        }\n      });\n      return count;\n    },\n    calculateCircumference: function calculateCircumference(value) {\n      var count = this.getMeta().count;\n\n      if (count > 0 && !isNaN(value)) {\n        return 2 * Math.PI / count;\n      }\n\n      return 0;\n    }\n  });\n};","map":{"version":3,"sources":["/home/mohamed/projects/sap/react-reduction/node_modules/chart.js/src/controllers/controller.polarArea.js"],"names":["defaults","require","elements","helpers","_set","scale","type","angleLines","display","gridLines","circular","pointLabels","ticks","beginAtZero","animation","animateRotate","animateScale","startAngle","Math","PI","legendCallback","chart","text","push","id","data","datasets","labels","length","i","backgroundColor","join","legend","generateLabels","map","label","meta","getDatasetMeta","ds","arc","custom","valueAtIndexOrDefault","arcOpts","options","fill","stroke","borderColor","bw","borderWidth","fillStyle","strokeStyle","lineWidth","hidden","isNaN","index","onClick","e","legendItem","ilen","update","tooltips","callbacks","title","item","yLabel","module","exports","Chart","controllers","polarArea","DatasetController","extend","dataElementType","Arc","linkScales","noop","reset","me","chartArea","getMeta","opts","minSize","min","right","left","bottom","top","outerRadius","max","innerRadius","cutoutPercentage","radiusLength","getVisibleDatasetCount","count","countVisibleElements","each","updateElement","dataset","getDataset","animationOpts","circumference","calculateCircumference","centerX","xCenter","centerY","yCenter","visibleCount","datasetStartAngle","distance","getDistanceFromCenterForValue","endAngle","resetRadius","_datasetIndex","_index","_scale","_model","x","y","removeHoverStyle","pivot","prototype","call","element","value"],"mappings":"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","sourcesContent":["'use strict';\n\nvar defaults = require('../core/core.defaults');\nvar elements = require('../elements/index');\nvar helpers = require('../helpers/index');\n\ndefaults._set('polarArea', {\n\tscale: {\n\t\ttype: 'radialLinear',\n\t\tangleLines: {\n\t\t\tdisplay: false\n\t\t},\n\t\tgridLines: {\n\t\t\tcircular: true\n\t\t},\n\t\tpointLabels: {\n\t\t\tdisplay: false\n\t\t},\n\t\tticks: {\n\t\t\tbeginAtZero: true\n\t\t}\n\t},\n\n\t// Boolean - Whether to animate the rotation of the chart\n\tanimation: {\n\t\tanimateRotate: true,\n\t\tanimateScale: true\n\t},\n\n\tstartAngle: -0.5 * Math.PI,\n\tlegendCallback: function(chart) {\n\t\tvar text = [];\n\t\ttext.push('<ul class=\"' + chart.id + '-legend\">');\n\n\t\tvar data = chart.data;\n\t\tvar datasets = data.datasets;\n\t\tvar labels = data.labels;\n\n\t\tif (datasets.length) {\n\t\t\tfor (var i = 0; i < datasets[0].data.length; ++i) {\n\t\t\t\ttext.push('<li><span style=\"background-color:' + datasets[0].backgroundColor[i] + '\"></span>');\n\t\t\t\tif (labels[i]) {\n\t\t\t\t\ttext.push(labels[i]);\n\t\t\t\t}\n\t\t\t\ttext.push('</li>');\n\t\t\t}\n\t\t}\n\n\t\ttext.push('</ul>');\n\t\treturn text.join('');\n\t},\n\tlegend: {\n\t\tlabels: {\n\t\t\tgenerateLabels: function(chart) {\n\t\t\t\tvar data = chart.data;\n\t\t\t\tif (data.labels.length && data.datasets.length) {\n\t\t\t\t\treturn data.labels.map(function(label, i) {\n\t\t\t\t\t\tvar meta = chart.getDatasetMeta(0);\n\t\t\t\t\t\tvar ds = data.datasets[0];\n\t\t\t\t\t\tvar arc = meta.data[i];\n\t\t\t\t\t\tvar custom = arc.custom || {};\n\t\t\t\t\t\tvar valueAtIndexOrDefault = helpers.valueAtIndexOrDefault;\n\t\t\t\t\t\tvar arcOpts = chart.options.elements.arc;\n\t\t\t\t\t\tvar fill = custom.backgroundColor ? custom.backgroundColor : valueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);\n\t\t\t\t\t\tvar stroke = custom.borderColor ? custom.borderColor : valueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);\n\t\t\t\t\t\tvar bw = custom.borderWidth ? custom.borderWidth : valueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttext: label,\n\t\t\t\t\t\t\tfillStyle: fill,\n\t\t\t\t\t\t\tstrokeStyle: stroke,\n\t\t\t\t\t\t\tlineWidth: bw,\n\t\t\t\t\t\t\thidden: isNaN(ds.data[i]) || meta.data[i].hidden,\n\n\t\t\t\t\t\t\t// Extra data used for toggling the correct item\n\t\t\t\t\t\t\tindex: i\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\n\t\tonClick: function(e, legendItem) {\n\t\t\tvar index = legendItem.index;\n\t\t\tvar chart = this.chart;\n\t\t\tvar i, ilen, meta;\n\n\t\t\tfor (i = 0, ilen = (chart.data.datasets || []).length; i < ilen; ++i) {\n\t\t\t\tmeta = chart.getDatasetMeta(i);\n\t\t\t\tmeta.data[index].hidden = !meta.data[index].hidden;\n\t\t\t}\n\n\t\t\tchart.update();\n\t\t}\n\t},\n\n\t// Need to override these to give a nice default\n\ttooltips: {\n\t\tcallbacks: {\n\t\t\ttitle: function() {\n\t\t\t\treturn '';\n\t\t\t},\n\t\t\tlabel: function(item, data) {\n\t\t\t\treturn data.labels[item.index] + ': ' + item.yLabel;\n\t\t\t}\n\t\t}\n\t}\n});\n\nmodule.exports = function(Chart) {\n\n\tChart.controllers.polarArea = Chart.DatasetController.extend({\n\n\t\tdataElementType: elements.Arc,\n\n\t\tlinkScales: helpers.noop,\n\n\t\tupdate: function(reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar chartArea = chart.chartArea;\n\t\t\tvar meta = me.getMeta();\n\t\t\tvar opts = chart.options;\n\t\t\tvar arcOpts = opts.elements.arc;\n\t\t\tvar minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\t\t\tchart.outerRadius = Math.max((minSize - arcOpts.borderWidth / 2) / 2, 0);\n\t\t\tchart.innerRadius = Math.max(opts.cutoutPercentage ? (chart.outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n\t\t\tchart.radiusLength = (chart.outerRadius - chart.innerRadius) / chart.getVisibleDatasetCount();\n\n\t\t\tme.outerRadius = chart.outerRadius - (chart.radiusLength * me.index);\n\t\t\tme.innerRadius = me.outerRadius - chart.radiusLength;\n\n\t\t\tmeta.count = me.countVisibleElements();\n\n\t\t\thelpers.each(meta.data, function(arc, index) {\n\t\t\t\tme.updateElement(arc, index, reset);\n\t\t\t});\n\t\t},\n\n\t\tupdateElement: function(arc, index, reset) {\n\t\t\tvar me = this;\n\t\t\tvar chart = me.chart;\n\t\t\tvar dataset = me.getDataset();\n\t\t\tvar opts = chart.options;\n\t\t\tvar animationOpts = opts.animation;\n\t\t\tvar scale = chart.scale;\n\t\t\tvar labels = chart.data.labels;\n\n\t\t\tvar circumference = me.calculateCircumference(dataset.data[index]);\n\t\t\tvar centerX = scale.xCenter;\n\t\t\tvar centerY = scale.yCenter;\n\n\t\t\t// If there is NaN data before us, we need to calculate the starting angle correctly.\n\t\t\t// We could be way more efficient here, but its unlikely that the polar area chart will have a lot of data\n\t\t\tvar visibleCount = 0;\n\t\t\tvar meta = me.getMeta();\n\t\t\tfor (var i = 0; i < index; ++i) {\n\t\t\t\tif (!isNaN(dataset.data[i]) && !meta.data[i].hidden) {\n\t\t\t\t\t++visibleCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// var negHalfPI = -0.5 * Math.PI;\n\t\t\tvar datasetStartAngle = opts.startAngle;\n\t\t\tvar distance = arc.hidden ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\t\t\tvar startAngle = datasetStartAngle + (circumference * visibleCount);\n\t\t\tvar endAngle = startAngle + (arc.hidden ? 0 : circumference);\n\n\t\t\tvar resetRadius = animationOpts.animateScale ? 0 : scale.getDistanceFromCenterForValue(dataset.data[index]);\n\n\t\t\thelpers.extend(arc, {\n\t\t\t\t// Utility\n\t\t\t\t_datasetIndex: me.index,\n\t\t\t\t_index: index,\n\t\t\t\t_scale: scale,\n\n\t\t\t\t// Desired view properties\n\t\t\t\t_model: {\n\t\t\t\t\tx: centerX,\n\t\t\t\t\ty: centerY,\n\t\t\t\t\tinnerRadius: 0,\n\t\t\t\t\touterRadius: reset ? resetRadius : distance,\n\t\t\t\t\tstartAngle: reset && animationOpts.animateRotate ? datasetStartAngle : startAngle,\n\t\t\t\t\tendAngle: reset && animationOpts.animateRotate ? datasetStartAngle : endAngle,\n\t\t\t\t\tlabel: helpers.valueAtIndexOrDefault(labels, index, labels[index])\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Apply border and fill style\n\t\t\tme.removeHoverStyle(arc);\n\n\t\t\tarc.pivot();\n\t\t},\n\n\t\tremoveHoverStyle: function(arc) {\n\t\t\tChart.DatasetController.prototype.removeHoverStyle.call(this, arc, this.chart.options.elements.arc);\n\t\t},\n\n\t\tcountVisibleElements: function() {\n\t\t\tvar dataset = this.getDataset();\n\t\t\tvar meta = this.getMeta();\n\t\t\tvar count = 0;\n\n\t\t\thelpers.each(meta.data, function(element, index) {\n\t\t\t\tif (!isNaN(dataset.data[index]) && !element.hidden) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn count;\n\t\t},\n\n\t\tcalculateCircumference: function(value) {\n\t\t\tvar count = this.getMeta().count;\n\t\t\tif (count > 0 && !isNaN(value)) {\n\t\t\t\treturn (2 * Math.PI) / count;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t});\n};\n"]},"metadata":{},"sourceType":"script"}